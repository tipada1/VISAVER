// находим паралакс элементы разбросаные по сайту
let parallaxEl = document.querySelectorAll('.parallax-layer');
// находим бегущую строку
let parallaxText = document.querySelector('.ticker');
// функция параллкс анимации при скроле
window.addEventListener('scroll', function () {
	let scrolY = this.window.scrollY;
	// при сколле анимируем паралакс элементы
	parallaxEl.forEach(function (elem) {
		let speed = elem.getAttribute('data-speed');

		elem.style.transform = `translateY(${-scrolY / 2.8 * speed}px)`
	})
	// анимируем бегущую строку
	parallaxText.style.transform = `translateX(${-scrolY}px)`
})
// ----------------------------------------- БЛОКИ КОТОРЫЕ ПЛАВНО ПОЯВЛЯЮТСЯ //
window.addEventListener('scroll', function () {
	const animItems = document.querySelector('.save__container');
	const animBorder = document.querySelectorAll('.save__item');
	const animTitle = document.querySelectorAll('.save__title');
	const animText = document.querySelectorAll('.save__text');

	let brOpacity = animItems.getBoundingClientRect().top * 0.2;

	let a = ((brOpacity - 150) / 10) * 0.2;
	let b = ((brOpacity - 120) / 10) * 0.2;
	let c = ((brOpacity - 90) / 10) * 0.2;

	animBorder.forEach(function (br) {
		br.style.opacity = (-a)
	})
	animTitle.forEach(function (tt) {
		tt.style.opacity = (-b)

	})
	animText.forEach(function (tx) {
		tx.style.opacity = (-c)
	})
})

// ---------------- ТЕКСТ В КРУГЕ КРУТИТСЯ ------------- //
window.addEventListener('scroll', function () {
	const textAroud = document.querySelector('.save__round-text');
	let scrollY = window.scrollY;
	textAroud.style.transform = `rotate(${scrollY / 2}deg)`
})
//------------------ АНИМАЦИЯ КАРТИНКИ,ТЕКСТА,РАКЕТЫ ---------//
window.addEventListener('scroll', function () {
	let create = document.querySelector('.create');
	let createText = document.querySelector('.create__text');
	let createRocket = document.querySelector('.create__rocket');
	let createImg = document.querySelector('.create__img');

	let wCenter = window.innerHeight / 2 + window.scrollY;
	let createCenter = create.offsetHeight / 2 + create.offsetTop;

	if (wCenter >= (createCenter - 200)) {
		createText.style.opacity = '1'
		createRocket.style.transform = `translate(0px, -28%)`
		createImg.style.transform = `translate(-7%, 0) rotate(0)`
	} else {
		createText.style.opacity = '0'
		createRocket.style.transform = `translate(-100%,-28%)`
		createImg.style.transform = `translate(-5%, -15%) rotate(15deg)`
	}
})
// ---------------- анимация блоков ------------------ //
window.addEventListener('scroll', function () {
	// console.log(windowDown);
	const gItems = document.querySelectorAll('.garmony__item');
	const gtitle = document.querySelector('.garmony__title');
	const gContainer = document.querySelector('.garmony__container');
	// const gColumn = document.querySelectorAll('.garmony__column');
	let gtitleTop = gtitle.offsetTop + gtitle.offsetHeight * 2;
	let windowDown = window.innerHeight + window.scrollY;

	if (windowDown >= gtitleTop) {
		gtitle.style.transform = 'translateX(0px)'
	} else {
		gtitle.style.transform = 'translateX(2000px)'
	}

	let item1 = gItems[0];
	let item2 = gItems[1];
	let item3 = gItems[2];
	let item4 = gItems[3];
	let item5 = gItems[4];

	const gItemTop = gContainer.getBoundingClientRect().top;

	let a = (gItemTop - 150) / 15;
	let a1 = (gItemTop - 150) / 5;
	let b = a - 12;
	let c = (gItemTop - 100) / 35;
	let d = (gItemTop - 100) / 4;

	if (a < 0) {
		a = 0;
	}
	if (a1 < 0) {
		a1 = 0;
	}
	if (b < 0) {
		b = 0;
	}
	if (c < 0) {
		c = 0;
	}
	if (d < 0) {
		d = 0;
	}

	item1.style.transform = `rotate(${-a}deg) translate(${-a}px, ${-a1}px)`
	item2.style.transform = `translate(0px, ${-a1}px)`
	item3.style.transform = `rotate(${b}deg) translate(${a}px, ${-a1}px)`
	item4.style.transform = `rotate(${c}deg) translate(${-b}px, ${a1}px)`
	item5.style.transform = `rotate(${-c}deg) translate(${-a1}px, ${d}px)`
})
// --------------- фиксированый блок(шторка) ------------- //
window.addEventListener('scroll', function () {
	let block1 = document.querySelector('.block-1');
	let block2 = document.querySelector('.block-2');
	let garmony = document.querySelector('.garmony');
	let blockBottom = block1.offsetHeight + garmony.offsetHeight;
	let wHeight = garmony.offsetHeight + scrollY;

	// console.log(blockBottom);
	// console.log(wHeight);

	const parallax = document.querySelector('.parallax-surprize');
	let pY = parallax.getBoundingClientRect().top / 4;

	if (wHeight > blockBottom) {
		parallax.style.transform = `translateY(${pY}px)`
		block1.classList.add('block-fixed')
		block2.classList.add('block-fixed')
	} else {
		block1.classList.remove('block-fixed')
		block2.classList.remove('block-fixed')
	}


})
// --------------- анимацию блока how ------------------ //
window.addEventListener('scroll', function () {
	let parallax = document.querySelectorAll('.parall');

	parallax.forEach(e => {
		let speed = e.getAttribute('data-speed');
		let y = e.getBoundingClientRect().top / 2;
		e.style.transform = `translateY(${y * speed}px)`
	});


	let animRow = document.querySelector('.how__row');
	let animY = animRow.getBoundingClientRect().top * 0.2;

	let anims = document.querySelectorAll('.how__item');
	let anim1 = anims[0];
	let anim2 = anims[1];
	let anim3 = anims[2];

	let a = ((animY - 110) * 0.1) / 2;
	let b = ((animY - 100) * 0.1) / 2;
	let c = ((animY - 90) * 0.1) / 2;

	anim1.style.opacity = -a * 0.4;
	anim2.style.opacity = -b * 0.4;
	anim3.style.opacity = -c * 0.4;
})
// ---------------- функционал кнопки --------------- //
let button = document.querySelectorAll('#button');
let blockOne = document.querySelector('.block-one');
let blockTwo = document.querySelector('.block-two');

blockTwo.classList.add('_block-click')

button.forEach(b => {
	b.addEventListener('click', function () {

		blockTwo.classList.toggle('_block-click')

		blockOne.classList.toggle('_block-click')

	})
});
// ----------------- bg ------------------ //
let bg = document.querySelectorAll('.bg__elips');
bg.forEach(function (b) {

	if (b) {
		bStart = 0.80;

		b.style.opacity = bStart

		window.addEventListener('scroll', function () {
			let bTop = (b.getBoundingClientRect().top / 100) * 0.1;
			// console.log(bTop);


			b.style.opacity = `${bStart + -bTop}`

			if ((bStart + -bTop) > 1) {
				b.style.opacity = 1
			}
		})

	}
});
// --------------------------------------